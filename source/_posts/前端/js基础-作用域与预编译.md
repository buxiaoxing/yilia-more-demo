---
title: js基础-作用域与预编译
abbrlink: 1ae0
date: 2022-07-26 17:16:33
tags:
  - 前端
  - js基础
  - 作用域
---
**要知道那是最后一次见面，我就穿好看点了**
<!--more-->
- 作用域定义

  变量和函数生效(能被访问)的区域	  
  里面的能访问外面的，外面的不能访问里面的

  - js运行三部曲

    1. 语法分析  
       检测低级语法错误

    2. 预编译  

       函数 - >整体提升

       变量 - >声明提升

    3. 解释执行  
       执行的时候就不用看提升了的部分，直接访问AO

- imply global(暗示全局变量)

  ```
        任何变量，如果变量未经声明就赋值，此变量为全局对象所有(归window所有)
  	所有声明的全局变量都归window所有，window就是全局。
  	function test(){
  		var a=b=1;
  		//b就是暗示全局变量
  	}
  ```

  

- 预编译四部曲

  1. 创建AO对象（执行期上下文，作用域）
  2. 找形参和参数变量，将变量和形参作为AO属性名，值为undefined
  3. 将实参值和形参统一
  4. 在函数体里找到函数声明，函数名作为AO属性名，属性值赋予函数体

  ```
   执行的时候就去AO中取
   函数的预编译就是AO，全局的预编译是GO
   先生成GO再生成AO
   AO生成于函数执行的前一刻
  ```

  

- [[scope]]
  - 含义  
      - 每个javascript函数都是一个对象，对象中有些属性我们可以访问，但有些不可以，这些属性仅供
        javascript引擎存取，[[scope]]就是其中一个。  
      - [[scope]]指的就是我们所说的作用域链，其中存储了执行期上下文(作用域)的集合;  
      - 每个函数定义时的[[scope]]等于上一级函数的执行时的[[scope]]
        函数执行时，会在[[scope]]顶部加上自己的AO
        函数执行完毕的时候销毁自己的AO